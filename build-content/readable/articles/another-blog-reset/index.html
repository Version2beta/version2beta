<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Another blog reset - readable &#124; version2beta</title><link rel="canonical" href="http://version2beta.com/another-blog-reset"><meta name="description" content="version2beta: A technical blog."><meta name="keywords" content=""><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="robots" content="noindex"><link href="/archive/atom.xml" rel="alternate" title="version2beta" type="application/atom+xml"><link rel="stylesheet" href="/style/layout.css" type="text/css" media="screen"><link rel="stylesheet" href="/style/text-styling.css" type="text/css" media="screen"><link rel="stylesheet" href="/style/responsive.css" type="text/css" media="screen"><link rel="shortcut icon" href="/static/site/favicon.png"></head><body><div id="site-readable"><div id="readable-content"><div id="content-header"><h1>Another blog reset</h1><p><span class="author">by <a href="https://plus.google.com/115037548656448421726?rel=author">Rob Martin</a>  on </span><span class="post-date"><time pubdate>2013-01-27 at 17:45</time></span><span class="category"><a href="/undefined"></a></span></p><p class="readable"><a href="/articles/another-blog-reset">Regular version</a></p></div><div id="post-content"><p>Last time I reset my blog,<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> I chose a static site generator called Hyde<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> because it is based on Python and Django<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>. It was a good choice at the time, but since then it's become heavy and I got tired of carrying it. In fact, in May 2012 I accidentally deleted my blog dev virtualenv environment and decided then I'd rather move the site to a new platform than rebuild the environment. After all, I keep telling myself I need to learn Jekyll<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>. Or Sinatra.<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup> Or I could build it in Tako<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup> on Node.js. In fact, at various times I think I started all of those projects.</p>
<p>So after a mere 8 months of false starts and procrastination, I managed to move my blog. And make it prettier.</p>
<h2>The new setup</h2>
<p>The new platform is based on a handful of interesting technologies that I wanted to learn more about:</p>
<ul>
<li>Amazon Web Services Route53 and S3 Simple Storage Service</li>
<li>Vagrant and Chef</li>
<li>Python Flask microframework</li>
<li>YAML and Markdown</li>
</ul>
<h3>Amazon Web Services</h3>
<p>Amazon Web Services<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup> offers a bunch of technologies at affordable pay-per-use prices. I did a largish project on AWS a couple years ago but haven't been using them much until recently, when I decided to take advantage of the &quot;free&quot; tier. I'm using an EC2<sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup> micro instance virtual private server right now as an online coding server pretty much specifically so I can invite other devs in on tmux<sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup> for remote pairing, but that's not actually relevant to my blog platform. For that, I'm using Route53<sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup> and S3<sup class="footnote-ref"><a href="#fn11" id="fnref11">[11]</a></sup>, but it's all giving me a good opportunity to come up to speed on a lot of their tech.</p>
<p>S3<sup class="footnote-ref"><a href="#fn11" id="fnref11:1">[11]</a></sup> provides file storage in the cloud. With the right permissions on files, you can share them with the world just like a web server would. Since my blogging platform is a &quot;static site generator&quot; (it builds a collection of static files that make up the site), I need someplace to store the files that's accessible via the internet.</p>
<p>Route53<sup class="footnote-ref"><a href="#fn10" id="fnref10:1">[10]</a></sup> is the special sauce that makes my static files accessible via my domain. This is a fairly recent addition to the AWS product line. First, it provides Domain Name Services or DNS for any domain pointed there. Second, it let's you associate a host in your DNS with a bucket in your S3. With that, any file I upload to S3 can be served at <a href="http://version2beta.com">http://version2beta.com</a>. Mission accomplished.</p>
<h3>Vagrant and Chef</h3>
<p>Chef is a server management tool that let's you associate a server (node) with cookbooks and recipes that install, configure, and maintain the software on the server. More advanced use lets you associate your server with one or more roles (like application server, or database server, load balancer, or super-secret-international-spyperson-hacking-platform) in an environment (like development, QA, production, or maybe destructive-test-grounds).</p>
<p>Chef works well with Vagrant<sup class="footnote-ref"><a href="#fn12" id="fnref12">[12]</a></sup>, which is a tool for quickly deploying local virtual machines using VirtualBox.<sup class="footnote-ref"><a href="#fn13" id="fnref13">[13]</a></sup> Vagrant deploys the virtual machine and then uses Chef (or Puppet,<sup class="footnote-ref"><a href="#fn14" id="fnref14">[14]</a></sup> a similar tool) to provision it.</p>
<p>What I've done this time around is create a Vagrant project (available on my Github<sup class="footnote-ref"><a href="#fn15" id="fnref15">[15]</a></sup>) that sets up my development environment on any machine with Vagrant installed. The blog is also on Github<sup class="footnote-ref"><a href="#fn16" id="fnref16">[16]</a></sup> of course, so in one command, I build everything I need in a development server to work on my blog. It's an on-demand environment. Pretty slick.</p>
<p>I've been killing birds with stones all over the place with Vagrant and Chef. One of my current $dayjob<sup class="footnote-ref"><a href="#fn17" id="fnref17">[17]</a></sup> projects is to create a portable development environment that's quick and easy for a dev to deploy. Another is to create QA environments that are disposable and fast. A third is to set up our production systems on Opscode's Hosted Chef environment.<sup class="footnote-ref"><a href="#fn18" id="fnref18">[18]</a></sup></p>
<p>I'm also preparing a presentation for the Milwaukee PHP User's Group<sup class="footnote-ref"><a href="#fn19" id="fnref19">[19]</a></sup>, one of our excellent local (Milwaukee) tech meetups. My presentation is on creating and using virtual development environments:<sup class="footnote-ref"><a href="#fn20" id="fnref20">[20]</a></sup></p>
<blockquote>
<p>Virtual development environments keep your workspace clean and predictable in dev and production, and creating a virtual development machine with Vagrant is quick and easy once you have all the pieces in place. Rob Martin (@version2beta) is going to put all the pieces together and hand them to you, and then show you how you can use them.</p>
</blockquote>
<h3>Python Flask microframework</h3>
<p>I've mentioned Flask<sup class="footnote-ref"><a href="#fn21" id="fnref21">[21]</a></sup> in other blog posts. It's a Python microframework originally inspired by Ruby's Sinatra<sup class="footnote-ref"><a href="#fn5" id="fnref5:1">[5]</a></sup> and written by Armin Ronacher<sup class="footnote-ref"><a href="#fn22" id="fnref22">[22]</a></sup>. I'm a big fan of Armin's work, which includes not only Flask but also Werkzeug,<sup class="footnote-ref"><a href="#fn23" id="fnref23">[23]</a></sup> Jinja2,<sup class="footnote-ref"><a href="#fn24" id="fnref24">[24]</a></sup>, and Sphinx.<sup class="footnote-ref"><a href="#fn25" id="fnref25">[25]</a></sup></p>
<p>I find writing web applications and restful services in Flask pretty easy. But it wasn't until I was looking at my options for replacing Hyde on this blog that I discovered Frozen-Flask,<sup class="footnote-ref"><a href="#fn26" id="fnref26">[26]</a></sup> a Flask extension that takes a static snapshot of a Flask application and stores it in a file system. Frozen-Flask makes Flask into a static site generator.</p>
<p>My Flask application is really quite simple.</p>
<ul>
<li>If I run it directly (<code>python sitebuilder.py</code>) it launches a development server on port 8000 (which Vagrant has forwarded to port 8000 on the host computer.)</li>
<li>If I run <code>python sitebuilder.py build</code> it freezes the website into the ./build directory.</li>
<li>If I run <code>python sitebuilder.py deploy</code> it freezes the website and copies the contents of the ./build directory to the S3 bucket, taking the site live.</li>
</ul>
<h3>YAML and markdown</h3>
<p>Finally it comes down to content, which if I understand correctly is an important part of a blog.</p>
<p>My content is stored in flat files. I like this. It makes it very easy to do version control and store them at Github. In fact with Github's new online editing,<sup class="footnote-ref"><a href="#fn27" id="fnref27">[27]</a></sup> I can even create and edit blog posts through their web interface.</p>
<p>My content is divided into &quot;pages&quot; and &quot;articles&quot;. Pages are manually linked to the navigation, or referenced on other pages. Articles are blog posts and always sorted in reverse chronological order (most recent first).</p>
<p>Each page or article is in it's own text file. The raw file is YAML<sup class="footnote-ref"><a href="#fn28" id="fnref28">[28]</a></sup> over Markdown.<sup class="footnote-ref"><a href="#fn29" id="fnref29">[29]</a></sup> There's a YAML header that contains a short and long title (the short title is used for the H1 tag, the long title is used for the title attribute in links), and an excerpt or summary. Articles also have a published attribute with the date and time to show as the published timestamp. These YAML fields are arbitrary though - what they're called only has relevance if they're referenced in a template or the program logic, so any fields can be added at any time. In fact, I'll probably add tags at some point, which will require updating the controller and the templates.</p>
<p>After the YAML header, there's a blank line. After that, there's markdown defining the main content for the page or article. Easy-peasy.</p>
<h2>What's next</h2>
<p>I hadn't intended to use YAML as my metadata transport. I wanted to use JSON for all of the content definitions, and support a variety of backends including CouchDB.<sup class="footnote-ref"><a href="#fn30" id="fnref30">[30]</a></sup> But JSON doesn't support multiline strings (you must embed the carriage returns) and I don't have a JSON+Markdown editor that I can connect to CouchDB. So that's a project I might take on.</p>
<p>Blogging is inherently organized by time, and my platform supports that. I think it'd be nice to also support tags. If I do that, I'll just use Javascript to make a faceted filter - check or uncheck tags or categories and articles appear or disappear.</p>
<h1>Check it out</h1>
<p>Check out the code for my blog platform on Github at <a href="https://github.com/Version2beta/version2beta">https://github.com/Version2beta/version2beta</a>.</p>
<p>Check out the Vagrant + Chef setup at <a href="https://github.com/Version2beta/vagrant-chef-flask">https://github.com/Version2beta/vagrant-chef-flask</a>. I'll be building a couple more open source versions of that getup for PHP stuff in preparation for my February presentation.</p>
<p><a href="http://docs.python.org/3/">http://docs.python.org/</a>.</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1"  class="footnote-item"><p>I blogged about the last blog reset too in <a href="/articles/blog-reset/" title="The last blog reset I did">Blog reset</a>. I blogged about starting this blog in <a href="http://version2beta.com/articles/instantiate-blog/" title="The story of how I ended up blogging. Again.">Instantiate blog</a> almost two years ago. <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
<li id="fn2"  class="footnote-item"><p><a href="http://ringce.com/hyde" title="Hyde is a static website generator powered by Python &amp; Django.">Hyde</a> is a static site generator inspired by Ruby's Jekyll<sup class="footnote-ref"><a href="#fn4" id="fnref4:1">[4]</a></sup>. <a href="#fnref2" class="footnote-backref">↩</a></p>
</li>
<li id="fn3"  class="footnote-item"><p><a href="https://www.djangoproject.com/" title="The web framework for perfectionists with deadlines.">Django</a> is a powerful and monolithic web application platform. <a href="#fnref3" class="footnote-backref">↩</a></p>
</li>
<li id="fn4"  class="footnote-item"><p><a href="http://jekyllrb.com/" title="Jekyll is a blog-aware, static site generator in Ruby.">Jekyll</a> is a Ruby-based static site generator. I don't consider myself a Ruby programmer, but I suspect that's changing. <a href="#fnref4" class="footnote-backref">↩</a> <a href="#fnref4:1" class="footnote-backref">↩</a></p>
</li>
<li id="fn5"  class="footnote-item"><p><a href="http://www.sinatrarb.com/" title="Sinatra is a DSL for quickly creating web applications in Ruby with minimal effort.">Sinatra</a> is a brilliantly simple web application microframework in Ruby. It's one of the reasons I'll probably become a Ruby programmer. <a href="#fnref5" class="footnote-backref">↩</a> <a href="#fnref5:1" class="footnote-backref">↩</a></p>
</li>
<li id="fn6"  class="footnote-item"><p><a href="https://github.com/mikeal/tako" title="Tako framework.">Tako</a> is a functional web framework in Javascript for Node.js. <a href="#fnref6" class="footnote-backref">↩</a></p>
</li>
<li id="fn7"  class="footnote-item"><p><a href="http://aws.amazon.com" title="Amazon Web Services">AWS</a> is Amazon Web Services, Amazon's platform for developing &quot;web scale&quot; applications in the cloud. <a href="#fnref7" class="footnote-backref">↩</a></p>
</li>
<li id="fn8"  class="footnote-item"><p><a href="http://aws.amazon.com/ec2/" title="Elastic Compute Cloud">EC2, or Elastic Compute Cloud</a> is Amazon AWS' virtual private server offering. <a href="#fnref8" class="footnote-backref">↩</a></p>
</li>
<li id="fn9"  class="footnote-item"><p><a href="http://tmux.sourceforge.net/" title="TMUX terminal multiplexer">TMUX</a> is a &quot;terminal multiplexer&quot; that I find useful when sharing a coding session with another programmer. <a href="#fnref9" class="footnote-backref">↩</a></p>
</li>
<li id="fn10"  class="footnote-item"><p><a href="http://aws.amazon.com/route53/" title="Amazon Route 53 is a highly available and scalable Domain Name System (DNS) web service.">Route53</a> is Amazon AWS' domain name service. <a href="#fnref10" class="footnote-backref">↩</a> <a href="#fnref10:1" class="footnote-backref">↩</a></p>
</li>
<li id="fn11"  class="footnote-item"><p><a href="http://aws.amazon.com/s3/" title="Amazon internet file store">S3, or Simple Storage Service</a> is Amazon AWS' cloud-based file store. <a href="#fnref11" class="footnote-backref">↩</a> <a href="#fnref11:1" class="footnote-backref">↩</a></p>
</li>
<li id="fn12"  class="footnote-item"><p><a href="http://www.vagrantup.com/" title="Development environments made easy">Vagrant</a> is a tool for creating lightweight, reproducable, portable development and QA environments. <a href="#fnref12" class="footnote-backref">↩</a></p>
</li>
<li id="fn13"  class="footnote-item"><p><a href="https://www.virtualbox.org/" title="Virtualization platform">VirtualBox</a> makes virtual machines run on a variety of host platforms including at least Linux, MAC OS X, and Windows. <a href="#fnref13" class="footnote-backref">↩</a></p>
</li>
<li id="fn14"  class="footnote-item"><p><a href="http://puppetlabs.com/" title="Configuration management.">Puppet</a> is a configuration management tool similar in some ways to Chef. I'm using Chef without much review of Puppet, so I can't add a whole lot more here. <a href="#fnref14" class="footnote-backref">↩</a></p>
</li>
<li id="fn15"  class="footnote-item"><p>This is my <a href="https://github.com/Version2beta/vagrant-chef-flask" title="dev environment source code">code repository for my blog dev environment</a> using Vagrant and Chef. <a href="#fnref15" class="footnote-backref">↩</a></p>
</li>
<li id="fn16"  class="footnote-item"><p>This is my <a href="https://github.com/Version2beta/version2beta" title="blog source code">code repository for my blog and static site generator</a>. <a href="#fnref16" class="footnote-backref">↩</a></p>
</li>
<li id="fn17"  class="footnote-item"><p><a href="http://tartansolutions.com" title="Tartan Solutions">Tartan Solutions</a> is my $dayjob. <a href="#fnref17" class="footnote-backref">↩</a></p>
</li>
<li id="fn18"  class="footnote-item"><p>Opscode Chef comes in a <a href="http://www.opscode.com/hosted-chef/" title="Hosted Chef at Opscode.">online version</a> that's pretty slick. I'm using it. <a href="#fnref18" class="footnote-backref">↩</a></p>
</li>
<li id="fn19"  class="footnote-item"><p>Milwaukee has a ton of great meetups. The <a href="http://www.mkepug.org/" title="Milwaukee PHP User's Group">PHP User's Group</a> is just one of them. <a href="#fnref19" class="footnote-backref">↩</a></p>
</li>
<li id="fn20"  class="footnote-item"><p>I'll be <a href="http://www.mkepug.org/events/101042652/" title="Smooth moves with Vagrant, Chef-solo, and git">presenting</a> on February 12, 2013 at 6 PM if you're in the area and available. <a href="#fnref20" class="footnote-backref">↩</a></p>
</li>
<li id="fn21"  class="footnote-item"><p>Flask is a Python microframework, originally inspired by Sinatra. It's my framework of choice for most things. <a href="#fnref21" class="footnote-backref">↩</a></p>
</li>
<li id="fn22"  class="footnote-item"><p>Check out <a href="http://lucumr.pocoo.org/" title="Armin's blog.">Armin online</a>. He's pretty damn cool. <a href="#fnref22" class="footnote-backref">↩</a></p>
</li>
<li id="fn23"  class="footnote-item"><p><a href="http://werkzeug.pocoo.org/" title="Werkzeug WSGI library">Werkzeug</a> is a whiskey library. No, a WSGI brilary. No, A whiskey a-go-go. I forget, what were we talking about? <a href="#fnref23" class="footnote-backref">↩</a></p>
</li>
<li id="fn24"  class="footnote-item"><p><a href="http://jinja.pocoo.org/" title="Jinja2 templating engine.">Jinja2</a> is a Python templating engine with a lot of features. <a href="#fnref24" class="footnote-backref">↩</a></p>
</li>
<li id="fn25"  class="footnote-item"><p><a href="http://sphinx-doc.org/" title="Sphinx documentation engine.">Sphinx</a> is a Python-based documentation platform used by lots and lots of projects, including <a href="#fnref25" class="footnote-backref">↩</a></p>
</li>
<li id="fn26"  class="footnote-item"><p><a href="http://packages.python.org/Frozen-Flask/" title="Frozen-Flask freezes a Flask application into a set of static files">Frozen-Flask</a> turns Flask into a static site generator. <a href="#fnref26" class="footnote-backref">↩</a></p>
</li>
<li id="fn27"  class="footnote-item"><p><a href="https://github.com/blog/905-edit-like-an-ace" title="Github online editing.">Github provides online editors now</a>. With these editors you can change existing files or create new ones right from the website. In fact, you can even edit other people's repos online. It forks them for you, and on commit will helpfully send a pull request. <a href="#fnref27" class="footnote-backref">↩</a></p>
</li>
<li id="fn28"  class="footnote-item"><p><a href="http://en.wikipedia.org/wiki/YAML" title="YAML on Wikipedia">YAML</a> is a way to store data in a way that computers find meaningful and people find comfortable. <a href="#fnref28" class="footnote-backref">↩</a></p>
</li>
<li id="fn29"  class="footnote-item"><p><a href="http://en.wikipedia.org/wiki/Markdown" title="Markdown on Wikipedia">Markdown</a> is a markup language, kinda like HTML but way easier to use and much nicer to read. <a href="#fnref29" class="footnote-backref">↩</a></p>
</li>
<li id="fn30"  class="footnote-item"><p><a href="http://couchdb.apache.org/" title="Relax.">CouchDB</a> is a JSON-based NoSQL database. <a href="#fnref30" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>
</div><hr><p class="readable"><a href="/articles/another-blog-reset">Regular version</a></p><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12023701-1']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script><script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script><script src="/static/js/css3-mediaqueries.js"></script></div></div></body></html>